f = @(x) -0.1*x.^4 - 0.15*x.^3 - 0.5*x.^2 - 0.25*x+  1.2 ;
df = @(x) -0.4*x.^3 - 0.45*x.^2 - x - 0.25 ;
h = 0.1 ; % 分割單位
x = 0:h:1 ;
y = f(x) ;
x0 = 0.5 ; % 欲求斜率位置

% (提示)
xt= 0.5;
nt = xt/h +1;
df3 = ( -3*y(nt) + 4*y(nt+1) - y(nt+2) ) / (2*h) ;
df_exact = df(0.5); %$正解

%----------------------------------------------------------

size(x)

x;

df2 = ( y(4) - y(3) ) / h ;
% 2點差分法 求 x=0.5 斜率為 -1.1546875

df3 = ( -3*y(3) + 4*y(4) - y(5) ) / (2*h) ;
% 3點前差分法

df3c = ( y(4) - y(2) ) * ( 2*h ) ;
% 3點中差分法 

%-----------------------------------------------------------

% Q：用2 3 5點差分法(間隔0.1)，與正解的比較

df2 = ( y(nt+1) - y(nt) ) / h 
df3 = ( -3*y(nt) + 4*y(nt+1) - y(nt+2) ) / (2*h) 
df5 = ( -25*y(nt) + 48*y(nt+1) - 36*y(nt+2) + 16*y(nt+3) - 3*y(nt+4) ) / (12*h)
df_exact = df(0.5)